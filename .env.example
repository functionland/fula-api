# Fula Gateway Configuration
# Copy this file to .env and customize

# ============================================
# Gateway Settings
# ============================================

# Host and port to bind
FULA_HOST=0.0.0.0
FULA_PORT=9000

# Debug logging
FULA_DEBUG=false

# Disable authentication (DEVELOPMENT ONLY!)
FULA_NO_AUTH=false

# ============================================
# IPFS Settings
# ============================================

# IPFS API URL (for block operations)
IPFS_API_URL=http://localhost:5001

# IPFS Cluster API URL (legacy - use PINNING_SERVICE_* instead)
CLUSTER_API_URL=http://localhost:9094

# Use in-memory storage (for testing only, data will not persist)
FULA_MEMORY_STORE=false

# ============================================
# IPFS Pinning Service (Standard API)
# ============================================
#
# IMPORTANT: Per-User Pinning Model
# ---------------------------------
# In production, EACH USER provides their own pinning credentials
# via HTTP headers on each request:
#
#   X-Pinning-Service: https://api.pinata.cloud/psa
#   X-Pinning-Token: <user's-own-bearer-token>
#
# This allows users to pin data to their own accounts (Pinata, Web3.Storage, etc.)
# The gateway NEVER stores user pinning credentials.
#
# Supported services (users choose their own):
# - Pinata: https://api.pinata.cloud/psa
# - Web3.Storage: https://api.web3.storage
# - Infura: https://ipfs.infura.io:5001
# - NFT.Storage: https://nft.storage/api
#
# The settings below are OPTIONAL - only for gateway-level fallback/testing:
#
# PINNING_SERVICE_ENDPOINT=https://api.pinata.cloud/psa
# PINNING_SERVICE_TOKEN=gateway-fallback-token

# ============================================
# Authentication
# ============================================

# JWT secret for token validation (generate a strong random string)
JWT_SECRET=your-secret-key-here-change-in-production

# OAuth 2.0 settings (optional)
# OAUTH_ISSUER=https://your-oauth-provider.com
# OAUTH_AUDIENCE=fula-storage

# ============================================
# Rate Limiting
# ============================================

# Requests per second per user
RATE_LIMIT_RPS=100

# ============================================
# Storage Limits
# ============================================

# Maximum single upload size (5GB)
MAX_UPLOAD_SIZE=5368709120

# Multipart chunk size (8MB)
MULTIPART_CHUNK_SIZE=8388608

# Multipart upload expiry (24 hours)
MULTIPART_EXPIRY_SECS=86400

# ============================================
# IPFS Cluster Settings
# ============================================

# Cluster secret (generate with: od -vN 32 -An -tx1 /dev/urandom | tr -d ' \n')
CLUSTER_SECRET=

# Replication settings
REPLICATION_FACTOR_MIN=2
REPLICATION_FACTOR_MAX=3

# ============================================
# Monitoring (optional)
# ============================================

# Grafana admin password
GRAFANA_PASSWORD=admin

# ============================================
# Logging
# ============================================

# Rust log level (error, warn, info, debug, trace)
RUST_LOG=info,fula_cli=debug,tower_http=debug
